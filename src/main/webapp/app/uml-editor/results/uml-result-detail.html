<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
            ng-click="$close()">&times;
    </button>
    <h4 class="modal-title">{{$ctrl.buildResult.parityWithSampleSolution}} Parity with Sample Solution</h4>
</div>
<div class="modal-body" id="result-detail-body" style="position: relative;" ng-switch on="$ctrl.loading">

    <div class="text-muted" id="result-detail-spinner" ng-switch-when="true"><i
        class="fa fa-circle-o-notch fa-lg fa-spin "></i></div>

    <div ng-switch-when="false" ng-if="$ctrl.buildResult.result != null">

        <p>We have compared your submission with the provided sample solution. You got <strong>{{$ctrl.buildResult.result.score}}
            of {{$ctrl.buildResult.result.maxScore}} points ({{$ctrl.buildResult.parityWithSampleSolution}})</strong>
            and here
            is why:</p>

        <!-- Assessment Errors -->
        <div ng-if="$ctrl.buildResult.result.errors.length > 0" class="umlResultSectionContainer">
            <h5 class="umlResultSectionTitle"><span class="text-danger"><strong><i
                class="fa fa-lg fa-times-circle-o"></i>&nbsp; Errors:</strong></span></h5>

            <ul class="umlResultListing">
                <li ng-repeat="error in $ctrl.buildResult.result.errors">{{error.errorMessage}}</li>
            </ul>
        </div>

        <!-- Penalties -->
        <div ng-if="$ctrl.buildResult.result.penalties.length > 0" class="umlResultSectionContainer">
            <h5 class="umlResultSectionTitle"><span class="text-danger"><strong><i class="fa fa-lg fa-ban"></i>&nbsp; Penalties ({{$ctrl.buildResult.result.penaltyScore}} points lost):</strong></span>
            </h5>
            <ul class="umlResultListing">
                <li ng-repeat="error in $ctrl.buildResult.result.penalties">{{error.errorMessage}}</li>
            </ul>

            <div class="umlSectionHint">
                Hint: Penalties are given if we think that you try to trick us. If that is not the case then you might have added some elements that are not required. Please read the description again.
            </div>
        </div>

        <!-- Assessment Warnings -->
        <div ng-if="$ctrl.buildResult.result.warnings.length > 0" class="umlResultSectionContainer">
            <h5 class="umlResultSectionTitle"><span class="text-warning"><strong><i
                class="fa fa-lg fa-exclamation-triangle"></i>&nbsp; Warnings (no impact on final score):</strong></span>
            </h5>
            <ul class="umlResultListing">
                <li ng-repeat="error in $ctrl.buildResult.result.warnings">{{error.errorMessage}}</li>
            </ul>
            <div class="umlSectionHint">
                Hint: Warnings have no impact on the final score but may refer to optimizations you could apply.
            </div>
        </div>

        <!-- Partly Correct -->
        <div ng-if="$ctrl.buildResult.result.partlyCorrect.length > 0" class="umlResultSectionContainer">
            <h5 class="umlResultSectionTitle"><span class="text-info"><strong><i
                class="fa fa-lg fa-check-circle-o"></i>&nbsp; Partly Correct:</strong></span></h5>
            <ul class="umlResultListing">
                <li ng-repeat="item in $ctrl.buildResult.result.partlyCorrect">{{item}}</li>
            </ul>
            <div class="umlSectionHint">
                Hint: You haven't got the whole points because some elements are not as expected by the sample solution. Read the problem description again.
            </div>
        </div>


        <!-- Correct -->
        <div ng-if="$ctrl.buildResult.result.correct.length > 0" class="umlResultSectionContainer">
            <h5 class="umlResultSectionTitle"><span class="text-success"><strong><i
                class="fa fa-lg fa-check-circle-o"></i>&nbsp; Correct:</strong></span></h5>
            <ul class="umlResultListing">
                <li ng-repeat="item in $ctrl.buildResult.result.correct">{{item}}</li>
            </ul>
        </div>
    </div>

    <div ng-switch-when="false" ng-if="$ctrl.buildLogs !== null" class="umlResultSectionContainer">
        An unexpected error has occurred. Please retry to run tests and contact an instructor if the error still occurs.
        Logs:
        <dl class="buildoutput dl-horizontal" ng-hide="$ctrl.buildLogs.length == 0">
            <dt ng-repeat-start="logEntry in $ctrl.buildLogs">{{logEntry.time | date:'yyyy-MM-dd HH:mm:ss'}}</dt>
            <dd ng-repeat-end ng-bind-html="logEntry.log"></dd>
        </dl>
    </div>

    <div ng-switch-when="false" ng-if="$ctrl.buildResult.internalErrorMessage !== null"
         class="umlResultSectionContainer">
        An unexpected error has occurred. Please retry to run tests and contact an instructor if the error still occurs.
        Logs:
        <pre>
            {{$ctrl.buildResult.internalErrorMessage}}
        </pre>
    </div>


</div>
<div class="modal-footer">
    <button class="btn btn-default pull-right" ng-click="$close()">Close</button>
</div>
